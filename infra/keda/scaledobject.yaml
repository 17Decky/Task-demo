apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
   name: task-demo-scaledobject
spec:
   scaleTargetRef:
      name: task-demo
   minReplicaCount: 2
   maxReplicaCount: 5
   triggers:
      - type: prometheus
        metadata:
          serverAddress: http://prometheus-kube-prometheus-prometheus.monitoring.svc.cluster.local:9090
          metricName: http_requests_total
          threshold: '50'
          query: sum(rate(http_requests_total{service="task-demo"}[1m]))
